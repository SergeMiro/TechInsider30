<!DOCTYPE html>
<html lang="en" class="light">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Tech Insider Bot</title>
	<link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600&family=Yeseva+One&display=swap" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600&family=Merriweather:wght@300&family=Yeseva+One&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="/index.b2625c6b.css">
</head>

<body class="darkTheme">
	<header class="bg-myColor1 max-w-full container mx-auto">
		<div class="flex justify-between p-littleP md:p-bigP text-black-400 rounded-b-2xl font-semibold" style="font-family: Lora, serif">
			<a href="/index.html" class="inline-flex flex-wrap text-4xl my-auto text-white font-semibold" style="font-family: Abril Fatface, serif">
				TELEGRAM Solutions
				<img src="/telegram.380615d3.svg" alt="logo" class="pl-3 hover:scale-125 anim hidden md:hidden lg:block">
			</a>
			<div class=" flex flex-col my-auto md:flex-row space-x-0 md:space-x-5 space-y-1 md:space-y-0">
				<a href="/index.html" class="bg-white dark:bg-slate-400	 text-center py-2 px-4 rounded-full hover:bg-blue-200 whitespace-nowrap w-auto flex flex-row cursor-pointer anim">	
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
						<path stroke-linecap="round" stroke-linejoin="round" d="M8.25 21v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21m0 0h4.5V3.545M12.75 21h7.5V10.75M2.25 21h1.5m18 0h-18M2.25 9l4.5-1.636M18.75 3l-1.5.545m0 6.205l3 1m1.5.5l-1.5-.5M6.75 7.364V3h-3v18m3-13.636l10.5-3.819"></path>
					</svg>
						<span class="pl-1">Home</span>	
				</a>
				<a href="/steps.html" class="bg-white dark:bg-slate-400 text-center py-2 px-4 rounded-full hover:bg-blue-200  whitespace-nowrap w-auto flex flex-row cursor-pointer anim">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
						<path stroke-linecap="round" stroke-linejoin="round" d="M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75"></path>
					 </svg>
					 <span class="pl-1">Steps</span>
				</a>
				<a href="/api.html" class="bg-white dark:bg-slate-400 text-center py-2 px-4 rounded-full hover:bg-blue-200  whitespace-nowrap w-auto flex flex-row cursor-pointer anim">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
						<path stroke-linecap="round" stroke-linejoin="round" d="M14.25 9.75L16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0020.25 18V6A2.25 2.25 0 0018 3.75H6A2.25 2.25 0 003.75 6v12A2.25 2.25 0 006 20.25z"></path>
					 </svg>
					 <span class="pl-1">API's used</span>
				</a>
				<a class="bg-blue-200 dark:bg-slate-500 text-center py-2 px-4 rounded-full hover:bg-blue-200  whitespace-nowrap w-auto flex flex-row cursor-pointer anim">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewbox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
						<path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23-.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"></path>
					 </svg>					 
					 <span class="pl-1">Action</span>
				</a>
			</div>
		</div>
	</header>

	<main class="container mx-auto pt-littleP md:pt-bigP font-yes">

	<section>

		<div class="inline-block flex flex-wrap items-center bg-blue-200 px-2 py-3 mx-2 md:px-5 md:py-5 lg:px-6 lg:py-6 mb-1 rounded-xl space-x-3 md:space-x-5 lg:space-x-7">
			<span class="text-3xl md:text-4xl lg:text-4xl inline-block bg-myColor1 text-start text-white rounded-b-full p-3 md:p-5 lg:p-6">1</span>
			<p class="text-3xl md:text-4xl lg:text-4xl text-myColor2 bold py-auto">Data recovery</p>
			<button id="startButton" class="text-2xl py-2 px-7 mt-1 border-2 border-myColor2  bg-white hover:bg-myColor2 text-myColor2 hover:text-white font-semibold rounded-3xl anim">start</button>
			<div class="py-auto pl-8">
				<div class="loading p-auto hidden anim" id="loadingAnimation">
					<div class="loading__square"></div>
					<div class="loading__square"></div>
					<div class="loading__square"></div>
					<div class="loading__square"></div>
					<div class="loading__square"></div>
					<div class="loading__square"></div>
					<div class="loading__square"></div>
					<div class="loading__square"></div>
				</div>
			</div>
		</div>
	  
		<div class="chanel-messages container grid grid-rows-4 gap-2 mx-auto p-littleP font-meri">
			<div id="result">
				
				<!-- Индикатор загрузки или сообщение о загрузке -->
				

			</div>
		</div>

		
	</section>







		




	</main>
	


	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script>const axiosConfig = {
    headers: {
        "X-RapidAPI-Key": "530e8178dfmsh704a7c63c08f8d1p164fddjsn47831134d88f",
        "X-RapidAPI-Host": "telegram-channel.p.rapidapi.com"
    }
};
const postsState = {
    posts: []
}; // Инициализация состояния для хранения постов
// Функция для фильтрации постов и возврата только нужных типов
const filterPostsByType = (posts, type)=>{
    return posts.filter((post)=>post.type === type);
};
const fetchTopPostsFromChannel = async (channel)=>{
    try {
        const response = await axios.get("https://telegram-channel.p.rapidapi.com/channel/message", {
            params: {
                channel: channel,
                limit: "4"
            },
            ...axiosConfig
        });
        return response.data;
    } catch (error) {
        console.error(`Произошла ошибка при получении данных для канала ${channel}:`, error);
        console.log(error.response.data); // Выведите подробности об ошибке из ответа сервера
        return null;
    }
};
const displayResult = (result)=>{
    const resultDiv = document.getElementById("result");
    resultDiv.innerHTML = ""; // Очистка предыдущего контента
    if (result && result.length > 0) {
        const rowContainer = document.createElement("div");
        rowContainer.classList.add("grid", "gap-2", "lg:grid-cols-3", "md:grid-cols-2", "sm:grid-cols-1");
        result.forEach((post)=>{
            const postContainer = document.createElement("div");
            postContainer.classList.add("w-full", "border-2", "border-myColor2", "rounded-xl", "overflow-hidden");
            if (post.photo && post.photo.url) {
                const photoElement = document.createElement("img");
                photoElement.src = post.photo.url;
                photoElement.alt = "Post Photo";
                photoElement.classList.add("w-full", "h-72", "object-cover");
                postContainer.appendChild(photoElement);
            }
            if (post.video && post.video.url) {
                const videoElement = document.createElement("video");
                videoElement.src = post.video.url;
                videoElement.controls = true;
                videoElement.classList.add("w-full", "h-72", "object-cover");
                postContainer.appendChild(videoElement);
            }
            if (post.text) {
                const textElement = document.createElement("p");
                textElement.textContent = post.text;
                textElement.classList.add("post-text", "p-littleP");
                postContainer.appendChild(textElement);
            }
            rowContainer.appendChild(postContainer);
        });
        resultDiv.appendChild(rowContainer);
    } else resultDiv.textContent = "Ошибка при получении данных";
};
const fetchTopPostsWithMostViews = async (channels)=>{
    try {
        const allPosts = [];
        for (const channel of channels){
            const response = await fetchTopPostsFromChannel(channel);
            if (response) allPosts.push(...response);
            // Устанавливаем интервал в 1 секунду между запросами
            await new Promise((resolve)=>setTimeout(resolve, 1000));
        }
        // Сортировка постов по убыванию просмотров (views)
        allPosts.sort((a, b)=>b.views - a.views);
        console.log("Посты с наибольшим количеством просмотров из всех каналов:");
        console.log(allPosts);
        return allPosts;
    } catch (error) {
        console.error("Произошла ошибка при получении данных:", error);
        return null;
    }
};
document.addEventListener("DOMContentLoaded", ()=>{
    const startButton = document.getElementById("startButton");
    const loadingAnimation = document.querySelector(".loading");
    const resultContainer = document.getElementById("result");
    startButton.addEventListener("click", async ()=>{
        startButton.style.display = "none"; // Скрываем кнопку "Start"
        loadingAnimation.style.display = "block"; // Показываем анимацию
        resultContainer.style.display = "none"; // Скрываем контейнер с результатом
        const channelsToFetch = [
            "mir_programmer",
            "ptichka_news",
            "technology_novosti"
        ];
        const result = await fetchTopPostsWithMostViews(channelsToFetch);
        displayResult(result);
        loadingAnimation.style.display = "none"; // Скрываем анимацию
        resultContainer.style.display = "block"; // Показываем контейнер с результатом
        startButton.style.display = "block"; // Показываем кнопку "Start" снова
    });
});

</script>
	
	<script src="/action.9251c216.js"></script></body>
</html>